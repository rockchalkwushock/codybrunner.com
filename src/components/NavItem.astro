---
import { Icon } from 'astro-icon'
import { twMerge } from 'tailwind-merge'
import Link from './Link.astro'

type IconName =
	| 'about'
	| 'blog'
	| 'bookShelf'
	| 'cv'
	| 'github'
	| 'home'
	| 'instagram'
	| 'linkedIn'
	| 'portfolio'
	| 'schedule'
	| 'twitter'
	| 'uses'

const iconMap: Record<IconName, string> = {
	about: 'mdi:about',
	blog: 'mdi:book-edit',
	bookShelf: 'mdi:bookshelf',
	cv: 'mdi:resume',
	github: 'mdi:github',
	home: 'mdi:home-circle',
	instagram: 'mdi:instagram',
	linkedIn: 'mdi:linkedin',
	portfolio: 'mdi:source-branch',
	schedule: 'mdi:calendar-clock',
	twitter: 'mdi:twitter',
	uses: 'mdi:tools',
}

export interface Props {
	iconLabel: string
	iconName: IconName
	isExternal?: boolean
	linkLabel: string
	to: string
}

const BASE_STYLES = ['bg-aura-purple-fading', 'p-2', 'relative', 'rounded-xl']

const { pathname } = Astro.url
const { iconLabel, iconName, isExternal, linkLabel, to } = Astro.props
const icon = iconMap[iconName]
const classNames = twMerge(BASE_STYLES)
---

<!-- TODO: Add tooltip -->
<li class={classNames}>
	<Link
		href={to}
		isActive={pathname === to}
		isExternal={!!isExternal}
		label={linkLabel}
	>
		<Icon aria-label={iconLabel} class='h-10 w-10' name={icon} />
	</Link>
</li>
