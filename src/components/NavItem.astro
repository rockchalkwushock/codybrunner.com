---
import { Icon } from 'astro-icon'
import { twMerge } from 'tailwind-merge'
import Link from './Link.astro'
import ListItem from './ListItem.astro'

type IconName =
	| 'blog'
	| 'bookShelf'
	| 'cv'
	| 'github'
	| 'home'
	| 'instagram'
	| 'linkedIn'
	| 'projects'
	| 'schedule'
	| 'twitter'
	| 'uses'

const iconMap: Record<IconName, string> = {
	blog: 'mdi:book-edit',
	bookShelf: 'mdi:bookshelf',
	cv: 'mdi:resume',
	github: 'mdi:github',
	home: 'mdi:home-circle',
	instagram: 'mdi:instagram',
	linkedIn: 'mdi:linkedin',
	projects: 'mdi:source-branch',
	schedule: 'mdi:calendar-clock',
	twitter: 'mdi:twitter',
	uses: 'mdi:tools',
}

export interface Props {
	readonly iconLabel: string
	readonly iconName: IconName
	readonly isExternal?: boolean
	readonly linkLabel: string
	readonly to: string
}

const BASE_STYLES = ['bg-aura-purple-fading', 'p-2', 'relative', 'rounded-xl']

const { pathname } = Astro.url
const { iconLabel, iconName, isExternal, linkLabel, to } = Astro.props
const icon = iconMap[iconName]
const styles = twMerge(BASE_STYLES)
---

<ListItem class={styles}>
	<Link
		aria-label={linkLabel}
		href={to}
		isActive={pathname === to}
		isExternal={!!isExternal}
	>
		<Icon aria-label={iconLabel} class='h-10 w-10' name={icon} />
	</Link>
</ListItem>
