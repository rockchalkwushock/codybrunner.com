<script is:inline>
	;(function () {
		const KEY = 'codybrunner-theme'

		function getCookie(name) {
			const value = `; ${document.cookie}`
			const parts = value.split(`; ${name}=`)
			if (parts.length === 2) return parts.pop().split(';').shift()
			return null
		}

		// Get theme with cookie priority
		const theme =
			getCookie(KEY) ||
			localStorage.getItem(KEY) ||
			(window.matchMedia('(prefers-color-scheme: dark)').matches
				? 'dark'
				: 'light')

		// Apply theme immediately to prevent flash
		if (theme === 'dark') {
			document.documentElement.classList.add('dark')
		}
	})()
</script>

<script>
	import { themeManagerInstance } from '~/utils/theme-manager'

	// Initialize theme manager after the page loads
	window.themeManager = themeManagerInstance
</script>
